(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{367:function(s,a,t){"use strict";t.r(a);var r=t(45),n=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"yapi是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yapi是什么"}},[s._v("#")]),s._v(" YApi是什么")]),s._v(" "),t("p",[s._v("旨在为开发、产品、测试人员提供更优雅的接口管理服务。可以帮助开发者轻松创建、发布、维护 API")]),s._v(" "),t("blockquote",[t("p",[s._v("注：YApi二次开发不支持windows环境")])]),s._v(" "),t("h2",{attrs:{id:"安装yapi之前-需要安装mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装yapi之前-需要安装mongodb"}},[s._v("#")]),s._v(" 安装YApi之前，需要安装mongodb")]),s._v(" "),t("p",[s._v("官网下载安装")]),s._v(" "),t("h2",{attrs:{id:"安装yapi-命令行部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装yapi-命令行部署"}},[s._v("#")]),s._v(" 安装YApi: 命令行部署")]),s._v(" "),t("h3",{attrs:{id:"_1-创建工程目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建工程目录"}},[s._v("#")]),s._v(" 1.创建工程目录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" yapi "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" yapi\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/YMFE/yapi.git vendors --depth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者下载 zip 包解压到 vendors 目录")]),s._v("\n")])])]),t("h3",{attrs:{id:"_2-修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改配置"}},[s._v("#")]),s._v(" 2.修改配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" vendors/config_example.json ./config.json "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制完成后请修改相关配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" ./config.json\n")])])]),t("p",[s._v("配置如下，主要配置 MongoDB 数据库，以及 Admin 账号。")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"port"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3011"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"adminAccount"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin@admin.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"db"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"servername"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"DATABASE"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yapi"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"port"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yapi"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pass"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yapi123"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mail"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"enable"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"host"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smtp.163.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"port"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("465")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"from"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"***@163.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"auth"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"***@163.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pass"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*****"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("db.user 和 db.pass 是 mongodb 的用户名和密码，如果没有开启 mongo 认证功能，请删除这两个选项。")])]),s._v(" "),t("h3",{attrs:{id:"_3-安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装依赖"}},[s._v("#")]),s._v(" 3.安装依赖")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" vendors\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --production --registry https://registry.npm.taobao.org "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖")]),s._v("\n")])])]),t("h3",{attrs:{id:"_4-初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-初始化"}},[s._v("#")]),s._v(" 4.初始化")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run install-server  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装程序会初始化数据库索引和管理员账号，管理员账号名可在 config.")]),s._v("\njson 配置\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认输出")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 初始化管理员账号成功,账号名："admin@admin.com"，密码："ymfe.org"')]),s._v("\n")])])]),t("h3",{attrs:{id:"_5-启动开发机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动开发机"}},[s._v("#")]),s._v(" 5.启动开发机")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node server/app.js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务器")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里可以结束了，下面的命令执行不起来，会报错")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务器后，请访问 127.0.0.1:{config.json配置的端口}，初次运行会有个编译的过程，请耐心等候")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 127.0.0.1:3011")]),s._v("\n")])])]),t("p",[s._v("目录结构")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- config.json\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- init.lock\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- log\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-- vendors\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- CHANGELOG.md\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- LICENSE\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- README.md\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- client\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- common\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- config_example.json\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- doc\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- exts\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- nodemon.json\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- npm-debug.log\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- package.json\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- plugin.json\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- server\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- static\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- webpack.alias.js\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- yapi-base-flow.jpg\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- ydocfile.js\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-- ykit.config.js\n")])])]),t("h2",{attrs:{id:"安装yapi-可视化部署-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装yapi-可视化部署-推荐"}},[s._v("#")]),s._v(" 安装YApi: 可视化部署[推荐]")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g yapi-cli --registry https://registry.npm.taobao.org\nyapi server\n")])])]),t("h2",{attrs:{id:"技术栈说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#技术栈说明"}},[s._v("#")]),s._v(" 技术栈说明")]),s._v(" "),t("p",[s._v("后端： koa mongoose")]),s._v(" "),t("p",[s._v("前端： react redux")]),s._v(" "),t("h2",{attrs:{id:"启动开发环境服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动开发环境服务器"}},[s._v("#")]),s._v(" 启动开发环境服务器")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" vendors\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务器后，请访问 127.0.0.1:{config.json配置的端口}，初次运行会有个编译的过程，请耐心等候")]),s._v("\n")])])]),t("h2",{attrs:{id:"启动生产环境服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动生产环境服务器"}},[s._v("#")]),s._v(" 启动生产环境服务器")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd vendors\nykit pack -m\nnode server/app.js\n")])])]),t("h2",{attrs:{id:"二次开发注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二次开发注意事项"}},[s._v("#")]),s._v(" 二次开发注意事项")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YMFE/yapi/issues/208",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/YMFE/yapi/issues/208"),t("OutboundLink")],1)]),s._v(" "),t("ol",[t("li",[s._v("查看上方链接可知：官方人员明确表示windows不支持二开")]),s._v(" "),t("li",[s._v("npm install 不行，改用 cnpm install")]),s._v(" "),t("li",[s._v("yapi使用的是打包后的gz压缩文件，只有修改gz文件才会生效")]),s._v(" "),t("li",[s._v("改动不生效则清理一下浏览器缓存")]),s._v(" "),t("li",[s._v("ykit是一个打包工具")])])])}),[],!1,null,null,null);a.default=n.exports}}]);